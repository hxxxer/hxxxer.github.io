<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>子网 on 闲碎</title>
    <link>https://hxxxer.github.io/tags/%E5%AD%90%E7%BD%91/</link>
    <description>Recent content in 子网 on 闲碎</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <copyright>This is a customized copyright.</copyright>
    <lastBuildDate>Fri, 12 Dec 2025 01:02:27 +0800</lastBuildDate>
    <atom:link href="https://hxxxer.github.io/tags/%E5%AD%90%E7%BD%91/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>电脑web服务代理手机https网址访问</title>
      <link>https://hxxxer.github.io/%E7%94%B5%E8%84%91web%E6%9C%8D%E5%8A%A1%E4%BB%A3%E7%90%86%E6%89%8B%E6%9C%BAhttps%E7%BD%91%E5%9D%80/</link>
      <pubDate>Fri, 12 Dec 2025 01:02:27 +0800</pubDate>
      <guid>https://hxxxer.github.io/%E7%94%B5%E8%84%91web%E6%9C%8D%E5%8A%A1%E4%BB%A3%E7%90%86%E6%89%8B%E6%9C%BAhttps%E7%BD%91%E5%9D%80/</guid>
      <description>&lt;p&gt;&lt;strong&gt;最后编辑于2025年12月12日&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;h1 id=&#34;前言&#34;&gt;前言&lt;/h1&gt;&#xA;&lt;p&gt;之前用手机的一个网页记录打胶，把数据保存在别人的演示服务器上(&lt;a href=&#34;https://dick.juwo.my/&#34;&gt;https://dick.juwo.my/&lt;/a&gt;)，结果过了几个月，别人的服务器下线了……我的数据全都没了，但是我知道它应该是保存在浏览器的localStorage上（因为后面自己做了一个仿版，保存的数据也是保存在localStorage。同时它的项目readme也说了它的数据是保存在本机，这种小数据大概率是保存在localStorage）。&lt;/p&gt;&#xA;&lt;p&gt;然后我的浏览器是可以打开开发工具台的，&lt;strong&gt;但是&lt;/strong&gt;，只能在可以正常加载的页面才可以打开……&lt;/p&gt;&#xA;&lt;p&gt;所以我就想&lt;del&gt;劫持&lt;/del&gt;这个网址，让手机访问这个网址能连接到电脑的web服务。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;p&gt;我开始之前就大概感觉到这个会比较复杂，因为涉及到了https，不是平时常用的web服务器对应的http。最后做完之后总结一下难点&lt;/p&gt;&#xA;&lt;h1 id=&#34;难点&#34;&gt;难点&lt;/h1&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;手机访问电脑热点的ip地址怎么连接到web服务器。&lt;/li&gt;&#xA;&lt;li&gt;手机怎么用host，使访问dick.juwo.my时能连接电脑热点的ip地址。&lt;/li&gt;&#xA;&lt;li&gt;手机访问https网址怎么才能正常访问，而不是报SSL相关的错。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;上面这些难点基本就是我一路循序渐进的思路。&lt;/p&gt;&#xA;&lt;h2 id=&#34;手机如何连接电脑web服务器&#34;&gt;手机如何连接电脑web服务器&lt;/h2&gt;&#xA;&lt;p&gt;电脑开热点给手机，然后开启一个flask服务器（端口为8000），然后需要监听所有ip地址，同时需要配置入站规则：在防火墙的高级设置里面添加两个新规则，使用端口规则类型，具体端口为80和443。&lt;/p&gt;&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;80是http下的默认端口，443是https下的默认端口。添加了80端口的规则是为了测试能否正常连接。不选择8000是因为到时候我们需要的是默认端口。&lt;/p&gt;&#xA;&lt;/blockquote&gt;&#xA;&lt;p&gt;然后需要使用netsh命令设定端口映射：设定80和443端口的全部流量直接映射到8000端口的localhost地址，为了手机访问80/443端口的请求能被8000端口的服务器接受，具体命令如下：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;netsh interface portproxy add v4tov4 &lt;span style=&#34;color:#f2d5cf&#34;&gt;listenport&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ef9f76&#34;&gt;80&lt;/span&gt; &lt;span style=&#34;color:#f2d5cf&#34;&gt;listenaddress&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;0.0.0.0 &lt;span style=&#34;color:#f2d5cf&#34;&gt;connectport&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ef9f76&#34;&gt;8000&lt;/span&gt; &lt;span style=&#34;color:#f2d5cf&#34;&gt;connectaddress&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;127.0.0.1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;netsh interface portproxy add v4tov4 &lt;span style=&#34;color:#f2d5cf&#34;&gt;listenport&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ef9f76&#34;&gt;443&lt;/span&gt; &lt;span style=&#34;color:#f2d5cf&#34;&gt;listenaddress&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;0.0.0.0 &lt;span style=&#34;color:#f2d5cf&#34;&gt;connectport&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ef9f76&#34;&gt;8000&lt;/span&gt; &lt;span style=&#34;color:#f2d5cf&#34;&gt;connectaddress&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;127.0.0.1&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;然后下面是查看netsh配置规则和清除规则的命令：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;netsh interface portproxy show all&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;netsh interface portproxy delete v4tov4 &lt;span style=&#34;color:#f2d5cf&#34;&gt;listenport&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ef9f76&#34;&gt;80&lt;/span&gt; &lt;span style=&#34;color:#f2d5cf&#34;&gt;listenaddress&lt;/span&gt;&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;0.0.0.0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;做完之后，手机访问192.168.137.1就能接受到web服务器的回应了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;手机如何配置host&#34;&gt;手机如何配置host&lt;/h2&gt;&#xA;&lt;p&gt;配置host就能使dick.juwo.my的请求直接重定向到192.168.137.1，但是手机没有root的情况下，不能直接修改/etc/host文件，只能使用代理软件，我使用的是Clash。其中要注意它的配置方法，和电脑的配置方法相当不同，是分别填键和值，我填了两次才填对。&lt;/p&gt;&#xA;&lt;p&gt;当配置好代理的host后，手机访问dick.juwo.my就能正常得到意向的网页了。&lt;/p&gt;&#xA;&lt;h2 id=&#34;如何正常配置https下的访问&#34;&gt;如何正常配置https下的访问&lt;/h2&gt;&#xA;&lt;p&gt;flask的默认启动配置下是没有https的支持的（具体是没有证书的支持），需要额外的操作。这一步有多个方法，我问ai得到了三个方法：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;直接netsh配置端口转发+flask配置ssl自签名证书&lt;/li&gt;&#xA;&lt;li&gt;不使用netsh的端口转发，使用Caddy进行证书配置和端口转发&lt;/li&gt;&#xA;&lt;li&gt;也不使用netsh，使用nginx进行更细致的配置&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;我一开始用的是Caddy，但是不知为何，不能正常工作，于是就使用了方案一。&lt;/p&gt;&#xA;&lt;h3 id=&#34;生成证书&#34;&gt;生成证书&lt;/h3&gt;&#xA;&lt;p&gt;netsh的配置前面有提。这里需要先在命令行里面使用openssl生成自签名证书，命令如下：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;openssl req -x509 -nodes -days &lt;span style=&#34;color:#ef9f76&#34;&gt;365&lt;/span&gt; -newkey rsa:2048 -keyout dick.juwo.my.key -out dick.juwo.my.crt -subj &lt;span style=&#34;color:#a6d189&#34;&gt;&amp;#34;/C=CN/ST=Beijing/L=Beijing/O=Org/CN=dick.juwo.my&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;生成路径就是当前文件夹，建议在flask服务器的路径下生成。&lt;/p&gt;&#xA;&lt;h3 id=&#34;flask服务器的ssl证书配置&#34;&gt;flask服务器的ssl证书配置&lt;/h3&gt;&#xA;&lt;p&gt;flask其实是支持解析https的流量，但是如果没有ssl证书，浏览器会报SSL相关的错，只需要简单地在启动函数里加ssl_context参数即可：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#c6d0f5;background-color:#303446;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;context &lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#a6d189&#34;&gt;&amp;#39;dick.juwo.my.crt&amp;#39;&lt;/span&gt;, &lt;span style=&#34;color:#a6d189&#34;&gt;&amp;#39;dick.juwo.my.key&amp;#39;&lt;/span&gt;)  &lt;span style=&#34;color:#737994;font-style:italic&#34;&gt;# 之前生成的证书&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;app&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;.&lt;/span&gt;run(host&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#a6d189&#34;&gt;&amp;#39;0.0.0.0&amp;#39;&lt;/span&gt;, port&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ef9f76&#34;&gt;8000&lt;/span&gt;, ssl_context&lt;span style=&#34;color:#99d1db;font-weight:bold&#34;&gt;=&lt;/span&gt;context)&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;成果&#34;&gt;成果&lt;/h2&gt;&#xA;&lt;p&gt;完成以上的配置之后，手机访问(&lt;a href=&#34;https://dick.juwo.my&#34;&gt;https://dick.juwo.my&lt;/a&gt;)就是flask服务器的返回页面了，我的浏览器也能正常打开开发工具台了，然后数据果然在localStorage里面！最后也是正常导出了。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
